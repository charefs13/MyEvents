{# dashboard utilisateur #}

{% extends "../layouts/base.twig" %}
{% block style %}
	<link rel="stylesheet" href="/assets/css/style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Convergence&family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&family=Roboto:wght@100;400&display=swap" rel="stylesheet">

{% endblock %}
{% block tile %}MyEvents- dashboard
{% endblock %}

{% block main %}
	<h1><img src="/assets/images/Titre-MyEvents.png" alt="titre principal MyEvents"></h1>

	<h2>Bienvenue
		{{utilisateur.prenom}}</h2>

	<section class="mainSection">
		{% if errorMessage %}
			<p class='error message'>{{ errorMessage }}</p>
		{% endif %}

		{% if successMessage %}
			<p class='message'>{{ successMessage }}</p>
		{% endif %}

		<div>


			<h3>Trouver un prestataire ğŸ”</h3>
			<div class="formEvenement">
				<form action="/recherchePrestataire" methode="GET">
					<label for="typeEvenement">Type d'Ã©vÃ©nement</label>
					<select id="typeEvenement" name="typeEvenement">
						<option value="babyShower">Baby Shower</option>
						<option value="genderReveal">Gender Reveal</option>
						<option value="mariage">Mariage</option>
						<option value="feteReligieuse">FÃªte religieuse</option>
						<option value="anniversaire">Anniversaire</option>
						<option value="bapteme">BaptÃªme</option>
						<option value="autre">Autre</option>
					</select>

					<label for="type">Prestataire</label>
					<select id="type" name="type">
						<option value="photographeVideaste">Photographe/VidÃ©aste</option>
						<option value="traiteur">Traiteur</option>
						<option value="dj">DJ</option>
						<option value="decorateur">DÃ©corateur</option>
						<option value="animateur">Animateur</option>
						<option value="locationMateriel">Location de matÃ©riel</option>
						<option value="locationSalle">Location de salle/Lieu de rÃ©ception</option>
						<option value="fleuriste">Fleuriste</option>
						<option value="stylistes">Styliste/Costumier</option>
						<option value="graphiste">Graphiste/Impression de supports</option>
						<option value="autre">Autre</option>
					</select>

					<label for="ville">Votre ville
					</label>
					<input type="text" id="ville" name="ville" placeholder="Entrez votre ville">

					<button type="submit">Rechercher</button>
				</form>
			</div>
		</section>
		<section class='mainSection'>
			<div>
				<h3>Vos Ã‰vÃ©nement en cours</h3>

				{% for evenement in evenements %}

					<div class='evenementContainer'>
						<h4>{{evenement.titre}}</h4>

						<p>
							Type d'Ã©vÃ©nement:
							{{evenement.type}}
						</p>
						<p>
							{{evenement.description}}
						</p>
						<p>Du
							<strong>{{ evenement.dateDebut|date("d/m/Y H:i") }}h</strong>
							au
							<strong>{{ evenement.dateFin|date("d/m/Y H:i") }}h</strong>
						</p>


						{% if evenement.lieu %}
							<p>Lieu :
								{{evenement.lieu}}</p>

						{% else %}
							<a class='link' href="">Rechercher un lieu pour fÃªter votre Ã©vÃ©nement</a>
						{% endif %}


						{% if utilisateur.devis|length > 0 %}
							<h4>Vos Devis</h4>
							<div class='allDevisContainer'>

								{% for devis in utilisateur.devis %}
									<div class='devisContainer'>
										<p>Devis NÂ°{{devis.id}}</p>
										<p>
											Prestataire:
											{{devis.raisonSociale}}</p>
										<p>
											CatÃ©gorie:
											{{devis.typeEntreprise}}</p>
										<p>Total :
											{{ devis.total }}
											â‚¬</p>
										{% if devis.isValidate %}
											<p class='validate'>Devis validÃ©,
												<a href="/paiement/{{ devis.id }}">Veuillez procÃ©der au paiement pour confirmer la prestation.</a>
											</p>
										{% else %}
											<p class='notValidate'>En attente de validation par le prestataire.</p>
										{% endif %}
									</div>
								{% endfor %}

							</div>
						{% endif %}


					</div>


				{% endfor %}

			</div>
			<div>
				<a href="/evenement" class="btn-ajouter">Ajouter un Ã©vÃ©nement</a>
			</div>
		</section>

	{% endblock %}
